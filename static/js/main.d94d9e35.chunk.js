(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{30:function(e,t,n){e.exports=n(44)},39:function(e,t,n){},40:function(e,t,n){},41:function(e,t,n){},43:function(e,t,n){},44:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),i=n(25),o=n.n(i),c=n(26),s=n(11),l=n(9),u=n(48),p=n(13),d=n(29),g=n(2),m=n(3),h=n(4),f=function(){function e(){Object(m.a)(this,e)}return Object(h.a)(e,null,[{key:"authenticateToken",value:function(e){sessionStorage.setItem("token",e)}},{key:"isUserAuthenticated",value:function(){if("undefined"!==sessionStorage.getItem("token"))return null!==sessionStorage.getItem("token")}},{key:"deauthenticateToken",value:function(){sessionStorage.removeItem("token")}},{key:"getToken",value:function(){return sessionStorage.getItem("token")}}]),e}();n(39);var b=n(6),E=n(5),O=n(7),v=(n(40),n(50)),y=n(46),_=n(47),j=n(49);function T(){return function(e){fetch("/recipes").then(function(e){return e.json()}).then(function(t){e({type:"LOAD_RECIPES",payload:t})}).catch(function(e){return console.log(e)})}}function D(e,t,n){return function(a){a({type:"HANDLE_ONCHANGE_FOR_INGREDIENTS",payload:{name:e.target.name,value:e.target.value,ingredientIndex:t,recipeID:n}})}}function C(e,t){e.preventDefault();var n=e.target.name,a=e.target.value;return function(e){e({type:"HANDLE_ONCHANGE_FOR_RECIPE_DETAILS",payload:{name:n,value:a,recipeID:t}})}}function I(e,t){return e.preventDefault(),function(e){fetch("/edit-recipe",{method:"PATCH",body:JSON.stringify({recipe:{id:t.id,title:t.title,description:t.description,image_url:t.image_url,servings:t.servings}}),headers:{"Content-Type":"application/json",token:f.getToken(),authorization:"Token ".concat(f.getToken())}}).then(e({type:"UPDATE_RECIPE_DETAILS",payload:t})).catch(function(e){return console.log(e)})}}function k(e,t,n,a,r){e.preventDefault(),n===a.serving_unit&&delete a.serving_unit;var i="".concat(a.serving_qty," ").concat(a.serving_unit||""," ").concat(n);return function(e){fetch("https://trackapi.nutritionix.com/v2/natural/nutrients",{method:"POST",body:JSON.stringify({query:i}),headers:{"Content-Type":"application/json","x-app-id":"b294e712","x-app-key":"6ec28ff9a79c6728c79df0ec6b4d36a9"}}).then(function(e){return e.json()}).then(function(n){var a={food_name:n.foods[0].food_name,serving_qty:n.foods[0].serving_qty,serving_unit:n.foods[0].serving_unit,calories:n.foods[0].nf_calories,total_fat:n.foods[0].nf_total_fat,saturated_fat:n.foods[0].nf_saturated_fat,cholesterol:n.foods[0].nf_cholesterol,sodium:n.foods[0].nf_sodium,total_carbohydrate:n.foods[0].nf_total_carbohydrate,dietary_fiber:n.foods[0].nf_dietary_fiber,sugars:n.foods[0].nf_sugars,protein:n.foods[0].nf_protein,potassium:n.foods[0].nf_potassium};fetch("/edit-ingredient",{method:"PATCH",body:JSON.stringify({ingredient:{ingredient_data:a,recipeID:t}}),headers:{"Content-Type":"application/json",token:f.getToken(),authorization:"Token ".concat(f.getToken())}}),e({type:"UPDATE_INGREDIENT",payload:{recipeID:t,ingredientIndex:r,updatedIngredient:a}})}).catch(function(e){return console.log(e)})}}function N(e,t,n){return e.preventDefault(),function(e){fetch("https://trackapi.nutritionix.com/v2/natural/nutrients",{method:"POST",body:JSON.stringify({query:t}),headers:{"Content-Type":"application/json","x-app-id":"b294e712","x-app-key":"6ec28ff9a79c6728c79df0ec6b4d36a9"}}).then(function(e){return e.json()}).then(function(t){var a=t.foods.map(function(e){return{food_name:e.food_name,serving_qty:e.serving_qty,serving_unit:e.serving_unit,calories:e.nf_calories,total_fat:e.nf_total_fat,saturated_fat:e.nf_saturated_fat,cholesterol:e.nf_cholesterol,sodium:e.nf_sodium,total_carbohydrate:e.nf_total_carbohydrate,dietary_fiber:e.nf_dietary_fiber,sugars:e.nf_sugars,protein:e.nf_protein,potassium:e.nf_potassium}});fetch("/edit-recipe",{method:"PATCH",body:JSON.stringify({recipe:{id:n.id,title:n.title,description:n.description,image_url:n.image_url,ingredients:a}}),headers:{"Content-Type":"application/json",token:f.getToken(),authorization:"Token ".concat(f.getToken())}}),e({type:"ADD_NEW_INGREDIENTS_TO_RECIPE",payload:{ingredientsList:a,recipeID:n.id}})}).catch(function(e){return console.log(e)})}}function S(e,t,n){return e.preventDefault(),function(e){fetch("/delete",{method:"DELETE",body:JSON.stringify({ingredient:{recipeID:t,ingredient_data:n}}),headers:{"Content-Type":"application/json",token:f.getToken(),authorization:"Token ".concat(f.getToken())}}).then(e({type:"DELETE_INGREDIENT",payload:{recipeId:t,ingredient:n}}))}}function R(e,t){return e.preventDefault(),function(e){fetch("/recipes",{method:"POST",body:JSON.stringify({recipe:{title:t.title,description:t.description,image_url:t.image_url,ingredients:t.ingredients,servings:t.servings}}),headers:{"Content-Type":"application/json",token:f.getToken(),authorization:"Token ".concat(f.getToken())}}).then(function(e){return e.json()}).then(function(n){t.id=n.recipe.id,e({type:"ADD_RECIPE",payload:t})}).catch(function(e){return console.log(e)})}}var A=n(45),w=(n(41),function(e){function t(){var e,n;Object(m.a)(this,t);for(var a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];return(n=Object(b.a)(this,(e=Object(E.a)(t)).call.apply(e,[this].concat(i)))).shortDescription=function(e){var t=e.substr(0,80);return t.substr(0,Math.min(t.length,t.lastIndexOf(" "))).concat("...")},n.calsPerServing=function(e){return e.ingredients&&e.servings>0?Math.round(n.props.sumNutritionalDataFor(e.ingredients,"calories")/e.servings):r.a.createElement("p",null,"Unavailable")},n}return Object(O.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"recipe-card"},r.a.createElement(A.a,{to:{pathname:"recipes/".concat(this.props.formatRecipeURL(this.props.recipe.title)),state:{recipe:this.props.recipe}}},r.a.createElement("div",{className:"recipe-header"},r.a.createElement("div",{className:"recipe-card-image",style:{background:"url(".concat(this.props.recipe.image_url,")"),backgroundSize:"150%"}},r.a.createElement("div",{className:"cals-per-serving"},"Calories/serving: ",this.calsPerServing(this.props.recipe)))),r.a.createElement("div",{className:"container"},r.a.createElement("h3",{className:"title"},this.props.recipe.title),r.a.createElement("p",{className:"description"},this.shortDescription(this.props.recipe.description)))))}}]),t}(a.Component)),F=Object(j.a)(Object(s.b)(function(e){return{formatRecipeURL:e.formatRecipeURL,sumNutritionalDataFor:e.sumNutritionalDataFor}})(w)),L=function(e){function t(){var e;return Object(m.a)(this,t),(e=Object(b.a)(this,Object(E.a)(t).call(this))).recipeDisplay=function(){return e.state.search_term.length>0?e.props.recipes.filter(function(t){return t.ingredients.find(function(t){return t.food_name.includes(e.state.search_term)})}).map(function(e){return r.a.createElement(F,{recipe:e,key:e.id})}):e.props.recipes.map(function(e){return r.a.createElement(F,{recipe:e,key:e.id})})},e.state={search_term:""},e}return Object(O.a)(t,e),Object(h.a)(t,[{key:"componentDidMount",value:function(){0===this.props.recipes.length&&this.props.loadRecipes()}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"recipes-list"},r.a.createElement("div",{className:"search"},r.a.createElement("form",{onSubmit:function(t){return e.searchAllRecipes(t)}},r.a.createElement("input",{type:"text",placeholder:"Search recipes by ingredient",onChange:function(t){e.setState(Object(g.a)({},e.state,{search_term:t.target.value}))}}),0===this.props.recipes.length?r.a.createElement("p",null,"No matches found."):r.a.createElement(r.a.Fragment,null))),this.recipeDisplay())}}]),t}(a.Component),P=Object(j.a)(Object(s.b)(function(e,t){return{username:e.user.username,recipes:t.user?e.recipes.filter(function(t){return t.creator_name===e.user.username}):e.recipes}},function(e){return{loadRecipes:Object(l.b)(T,e)}})(L)),U=(n(43),function(e){function t(){return Object(m.a)(this,t),Object(b.a)(this,Object(E.a)(t).apply(this,arguments))}return Object(O.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){return r.a.createElement("table",null,r.a.createElement("tbody",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Ingredient"),r.a.createElement("th",null,"Calories(kCal)"),r.a.createElement("th",null,"Carbohydrates(g)"),r.a.createElement("th",null,"Protein(g)"),r.a.createElement("th",null,"Sugars(g)")),this.props.recipe.ingredients.map(function(e,t){return r.a.createElement("tr",{key:t},r.a.createElement("td",null,e.food_name,", ",e.serving_qty," ",e.serving_unit),r.a.createElement("td",null,Math.floor(e.calories)),r.a.createElement("td",null,e.total_carbohydrate),r.a.createElement("td",null,e.protein),r.a.createElement("td",null,e.sugars))})))}}]),t}(a.Component)),x=function(e){function t(){return Object(m.a)(this,t),Object(b.a)(this,Object(E.a)(t).apply(this,arguments))}return Object(O.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"preview"},this.props.recipe.title?r.a.createElement(r.a.Fragment,null,r.a.createElement("h3",{className:"title"},this.props.recipe.title),r.a.createElement("h5",null,"Servings: ",this.props.recipe.servings),r.a.createElement("h5",null,"Total Calories: ",this.props.newRecipe?r.a.createElement(r.a.Fragment,null,"Data Unavailable"):this.props.sumNutritionalDataFor(this.props.recipe.ingredients,"calories")),r.a.createElement("p",null,this.props.recipe.description),r.a.createElement("div",{className:"preview-image",style:{background:"url(".concat(this.props.recipe.image_url,")"),backgroundSize:"100%"}})):r.a.createElement("h1",null,"Preview"),this.props.recipe.title&&this.props.recipe.ingredients?r.a.createElement(U,{recipe:this.props.recipe}):r.a.createElement(r.a.Fragment,null),this.props.newRecipe&&this.props.recipe.title?r.a.createElement("input",{type:"submit",value:"Save Recipe",onClick:function(t){return e.props.saveRecipe(t,e.props.recipe)}}):r.a.createElement(r.a.Fragment,null))}}]),t}(a.Component),G=function(e){function t(){return Object(m.a)(this,t),Object(b.a)(this,Object(E.a)(t).apply(this,arguments))}return Object(O.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement("h1",null,"Create a New Recipe"),r.a.createElement("form",{onSubmit:function(t){return e.props.fetchIngredients(t)}},r.a.createElement("textarea",{cols:"60",name:"title",value:this.props.recipe.title,placeholder:"Title",onChange:function(t){return e.props.handleOnChange(t)}}),r.a.createElement("br",null),r.a.createElement("textarea",{cols:"60",name:"image_url",value:this.props.recipe.image_url,placeholder:"Image",onChange:function(t){return e.props.handleOnChange(t)}}),r.a.createElement("br",null),r.a.createElement("textarea",{cols:"60",name:"description",value:this.props.recipe.description,placeholder:"Brief Description",onChange:function(t){return e.props.handleOnChange(t)}}),r.a.createElement("br",null),"Servings: ",r.a.createElement("input",{type:"number",name:"servings",value:this.props.recipe.servings,onChange:function(t){return e.props.handleOnChange(t)}}),r.a.createElement("br",null),r.a.createElement("textarea",{rows:"10",cols:"60",name:"ingredients",value:this.props.ingredients_to_fetch,placeholder:"Ingredient",onChange:function(t){return e.props.handleOnChangeForIngredients(t)}}),r.a.createElement("br",null),r.a.createElement("input",{type:"submit",value:"Add Ingredients"})))}}]),t}(a.Component),H=function(e){function t(){var e;return Object(m.a)(this,t),(e=Object(b.a)(this,Object(E.a)(t).call(this))).handleOnChange=function(t){t.preventDefault();var n=t.target.name,a=t.target.value;e.setState(Object(g.a)({},e.state,{recipe:Object(g.a)({},e.state.recipe,Object(p.a)({},n,a))}))},e.handleOnChangeForIngredients=function(t){t.preventDefault();var n=t.target.value;e.setState({ingredients_to_fetch:n})},e.fetchIngredients=function(t){t.preventDefault(),e.setState(Object(g.a)({},e.state,{errors:""})),fetch("https://trackapi.nutritionix.com/v2/natural/nutrients",{method:"POST",body:JSON.stringify({query:e.state.ingredients_to_fetch}),headers:{"Content-Type":"application/json","x-app-id":"b294e712","x-app-key":"6ec28ff9a79c6728c79df0ec6b4d36a9"}}).then(function(e){return e.json()}).then(function(t){if(t.message)e.setState(Object(g.a)({},e.state,{errors:t.message}));else{var n=t.foods.map(function(e){var t={};return t.food_name=e.food_name,t.serving_qty=e.serving_qty,t.serving_unit=e.serving_unit,t.calories=e.nf_calories,t.total_fat=e.nf_total_fat,t.saturated_fat=e.nf_saturated_fat,t.cholesterol=e.nf_cholesterol,t.sodium=e.nf_sodium,t.total_carbohydrate=e.nf_total_carbohydrate,t.dietary_fiber=e.nf_dietary_fiber,t.sugars=e.nf_sugars,t.protein=e.nf_protein,t.potassium=e.nf_potassium,t});e.setState(Object(g.a)({},e.state,{recipe:Object(g.a)({},e.state.recipe,{ingredients:n})}))}}).catch(function(e){return console.log(e)})},e.state={recipe:{title:"",image_url:"",description:"",ingredients:"",servings:""},ingredients_to_fetch:"",errors:""},e}return Object(O.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"recipe-form"},r.a.createElement(G,{recipe:this.state.recipe,ingredients_to_fetch:this.state.ingredients_to_fetch,fetchIngredients:this.fetchIngredients,handleOnChange:this.handleOnChange,handleOnChangeForIngredients:this.handleOnChangeForIngredients})),this.state.errors?r.a.createElement("div",{className:"errors"},r.a.createElement("h1",null,this.state.errors)):r.a.createElement("div",{className:"recipe-container"},r.a.createElement(x,{recipe:this.state.recipe,saveRecipe:this.props.saveRecipe,newRecipe:"true"})))}}]),t}(a.Component),q=Object(s.b)(null,function(e){return{saveRecipe:Object(l.b)(R,e)}})(H),J=function(e){function t(){var e,n;Object(m.a)(this,t);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(n=Object(b.a)(this,(e=Object(E.a)(t)).call.apply(e,[this].concat(r)))).ingredients=n.props.recipe.ingredients,n.dataPoints=Object.keys(n.ingredients[0]).slice(3,n.ingredients[0].length),n.nutritionalTotals=n.dataPoints.map(function(e){return n.props.sumNutritionalDataFor(n.ingredients,e)}),n.servingTotals=n.nutritionalTotals.map(function(e){return Math.round(e/n.props.recipe.servings)}),n.formatDataPoint=function(e){return e.replace(/_/," ").toLowerCase().replace(/(^| )(\w)/g,function(e){return e.toUpperCase()})},n}return Object(O.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("table",null,r.a.createElement("tbody",null,this.dataPoints.map(function(t,n){return r.a.createElement("tr",{key:t},r.a.createElement("th",{style:{textAlign:"left"}},e.formatDataPoint(t)),r.a.createElement("td",{style:{width:"150%",textAlign:"right"}},e.props.serving?e.servingTotals[n]:e.nutritionalTotals[n]))})))}}]),t}(a.Component),B=Object(s.b)(function(e){return{sumNutritionalDataFor:e.sumNutritionalDataFor}})(J),M=function(e){function t(){return Object(m.a)(this,t),Object(b.a)(this,Object(E.a)(t).apply(this,arguments))}return Object(O.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement(r.a.Fragment,null,r.a.createElement("h1",null,this.props.recipe.title),this.props.username===this.props.recipe.creator_name?r.a.createElement("span",{className:"fake-link",onClick:function(){return e.props.editDetailsToggler()}},"Edit Recipe Details"):r.a.createElement(r.a.Fragment,null),r.a.createElement("p",null,this.props.recipe.description),r.a.createElement("img",{src:this.props.recipe.image_url,alt:this.props.recipe.title}))}}]),t}(a.Component),z=function(e){function t(){return Object(m.a)(this,t),Object(b.a)(this,Object(E.a)(t).apply(this,arguments))}return Object(O.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement(r.a.Fragment,null,r.a.createElement("h1",null,this.props.recipe.title),r.a.createElement("span",{className:"fake-link",onClick:function(){return e.props.editDetailsToggler()}},"Close Edit Form"),r.a.createElement("form",{onSubmit:function(t){return e.props.updateRecipeDetails(t,e.props.recipe)}},r.a.createElement("textarea",{cols:"60",name:"title",value:this.props.recipe.title,placeholder:"Title",onChange:function(t){return e.props.handleOnChangeForRecipeDetails(t,e.props.recipe.id)}}),r.a.createElement("br",null),r.a.createElement("textarea",{cols:"60",name:"image_url",value:this.props.recipe.image_url,placeholder:"Image",onChange:function(t){return e.props.handleOnChangeForRecipeDetails(t,e.props.recipe.id)}}),r.a.createElement("br",null),"Servings: ",r.a.createElement("input",{type:"number",name:"servings",value:this.props.recipe.servings,onChange:function(t){return e.props.handleOnChangeForRecipeDetails(t,e.props.recipe.id)}}),r.a.createElement("br",null),r.a.createElement("textarea",{cols:"60",name:"description",value:this.props.recipe.description,placeholder:"Brief Description",onChange:function(t){return e.props.handleOnChangeForRecipeDetails(t,e.props.recipe.id)}}),r.a.createElement("br",null),r.a.createElement("input",{type:"submit",value:"Update Recipe Details"}),r.a.createElement("br",null)))}}]),t}(a.Component),V=function(e){function t(){return Object(m.a)(this,t),Object(b.a)(this,Object(E.a)(t).apply(this,arguments))}return Object(O.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("table",null,r.a.createElement("tbody",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Ingredient"),r.a.createElement("th",null,"Quantity"),r.a.createElement("th",null,"Serving Unit"),r.a.createElement("th",null,"Calories"),r.a.createElement("th",null,"Carbs(g)"),r.a.createElement("th",null,"Protein(g)"),r.a.createElement("th",null,"Sugars(g)")),this.props.ingredients.map(function(t,n){return r.a.createElement("tr",{key:n},r.a.createElement("td",null,t.food_name),r.a.createElement("td",null,r.a.createElement("input",{type:"text",name:"serving_qty",value:t.serving_qty,onChange:function(t){return e.props.handleOnChangeForIngredients(t,n,e.props.recipeID)}})),r.a.createElement("td",null,r.a.createElement("input",{type:"text",name:"serving_unit",value:t.serving_unit,onChange:function(t){return e.props.handleOnChangeForIngredients(t,n,e.props.recipeID)}})),r.a.createElement("td",null,Math.floor(t.calories)),r.a.createElement("td",null,t.total_carbohydrate),r.a.createElement("td",null,t.protein),r.a.createElement("td",null,t.sugars),r.a.createElement("td",null,r.a.createElement("button",{onClick:function(a){return e.props.updateIngredient(a,e.props.recipeID,t.food_name,t,n)}},"Update")),r.a.createElement("td",null,r.a.createElement("button",{onClick:function(n){return e.props.deleteIngredient(n,e.props.recipeID,t)}},"Delete")))})))}}]),t}(a.Component),X=function(e){function t(){var e;return Object(m.a)(this,t),(e=Object(b.a)(this,Object(E.a)(t).call(this))).handleOnChange=function(t){e.setState({rawIngredients:t.target.value})},e.state={rawIngredients:""},e}return Object(O.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("form",{onSubmit:function(t){return e.props.fetchAndPostIngredients(t,e.state.rawIngredients,e.props.recipe)}},r.a.createElement("textarea",{rows:"10",cols:"60",name:"rawIngredients",value:this.props.rawIngredients,placeholder:"Add Ingredients",onChange:function(t){return e.handleOnChange(t)}}),r.a.createElement("br",null),r.a.createElement("input",{type:"submit",value:"Save Ingredients"}),r.a.createElement("button",{onClick:function(){return e.props.addIngredientsToggler()}},"Hide Form"))}}]),t}(a.Component),W=function(e){function t(e){var n;return Object(m.a)(this,t),(n=Object(b.a)(this,Object(E.a)(t).call(this,e))).tableToggler=function(e){switch(e){case"recipe":return n.setState({ingredientsTableToggled:!1,nutritionalTableToggled:!0,servingTableToggled:!1,editIngredientsToggled:!1});case"serving":return n.setState({ingredientsTableToggled:!1,nutritionalTableToggled:!1,servingTableToggled:!0,editIngredientsToggled:!1});case"ingredient":return n.setState({ingredientsTableToggled:!0,nutritionalTableToggled:!1,servingTableToggled:!1,editIngredientsToggled:!1});case"edit":return n.setState({ingredientsTableToggled:!1,nutritionalTableToggled:!1,servingTableToggled:!1,editIngredientsToggled:!0});default:console.log("No changes made to state")}},n.editDetailsToggler=function(){n.setState(Object(g.a)({},n.state,{editRecipeDetails:!n.state.editRecipeDetails}))},n.addIngredientsToggler=function(){n.setState({addIngredientsToggled:!n.state.addIngredientsToggled})},n.renderTable=function(){return n.state.nutritionalTableToggled?r.a.createElement(B,{recipe:n.props.recipe}):n.state.ingredientsTableToggled?r.a.createElement(U,{recipe:n.props.recipe}):n.state.servingTableToggled?r.a.createElement(B,{recipe:n.props.recipe,serving:"true"}):n.state.editIngredientsToggled?r.a.createElement(r.a.Fragment,null,r.a.createElement(V,{handleOnChangeForIngredients:n.props.handleOnChangeForIngredients,updateIngredient:n.props.updateIngredient,deleteIngredient:n.props.deleteIngredient,ingredients:n.props.recipe.ingredients,recipeID:n.props.recipe.id}),n.state.addIngredientsToggled?r.a.createElement(X,{addIngredientsToggler:n.addIngredientsToggler,fetchAndPostIngredients:n.props.fetchAndPostIngredients,recipe:n.props.recipe}):r.a.createElement("button",{onClick:function(){return n.addIngredientsToggler()}},"Add Ingredients")):void 0},n.state={ingredientsTableToggled:!1,nutritionalTableToggled:!0,servingTableToggled:!1,editIngredientsToggled:!1,addIngredientsToggled:!1,editRecipeDetails:!1},n}return Object(O.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"full-recipe-card"},this.state.editRecipeDetails?r.a.createElement(z,{recipe:this.props.recipe,editDetailsToggler:this.editDetailsToggler,editRecipeDetails:this.state.editRecipeDetails,handleOnChangeForRecipeDetails:this.props.handleOnChangeForRecipeDetails,updateRecipeDetails:this.props.updateRecipeDetails}):r.a.createElement(M,{recipe:this.props.recipe,username:this.props.username,editDetailsToggler:this.editDetailsToggler})),r.a.createElement("div",{className:"ingredients-table"},r.a.createElement("h1",null,"Nutritional Data"),r.a.createElement("span",{className:"fake-link",onClick:function(){return e.tableToggler("recipe")}},"By Recipe")," |",r.a.createElement("span",{className:"fake-link",onClick:function(){return e.tableToggler("serving")}}," By Serving")," |",r.a.createElement("span",{className:"fake-link",onClick:function(){return e.tableToggler("ingredient")}}," By Ingredient"),this.props.username===this.props.recipe.creator_name?r.a.createElement("span",{className:"fake-link",onClick:function(){return e.tableToggler("edit")}}," | Edit"):r.a.createElement(r.a.Fragment,null),this.renderTable()))}}]),t}(a.Component),Q=Object(j.a)(Object(s.b)(function(e,t){return{username:e.user.username,formatRecipeURL:e.formatRecipeURL,recipe:e.recipes.find(function(e){return e.title.toLowerCase()===t.location.pathname.split("/")[2].split("-").join(" ")})}},function(e){return{handleOnChangeForRecipeDetails:Object(l.b)(C,e),updateRecipeDetails:Object(l.b)(I,e),handleOnChangeForIngredients:Object(l.b)(D,e),updateIngredient:Object(l.b)(k,e),fetchAndPostIngredients:Object(l.b)(N,e),deleteIngredient:Object(l.b)(S,e)}})(W)),Z=function(e){function t(){return Object(m.a)(this,t),Object(b.a)(this,Object(E.a)(t).apply(this,arguments))}return Object(O.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("h1",null,"Something went wrong."),r.a.createElement("img",{src:"https://media.giphy.com/media/7QZ0XOOuTaMdW/giphy.gif",alt:"facepalm"}))}}]),t}(a.Component),K=r.a.createElement(v.a,{id:"routes"},r.a.createElement(y.a,{exact:!0,path:"/",render:function(){return r.a.createElement(P,null)}}),r.a.createElement(y.a,{exact:!0,path:"/recipes",component:function(){return r.a.createElement(P,null)}}),r.a.createElement(y.a,{exact:!0,path:"/my-recipes",component:function(){return f.isUserAuthenticated()?r.a.createElement(P,{user:"true"}):r.a.createElement(_.a,{to:"/login"})}}),r.a.createElement(y.a,{exact:!0,path:"/recipes/new",component:function(){return f.isUserAuthenticated()?r.a.createElement(q,null):r.a.createElement(_.a,{to:"/login"})}}),r.a.createElement(y.a,{exact:!0,path:"/recipes/:recipeName",component:function(){return r.a.createElement(Q,null)}}),r.a.createElement(y.a,{path:"*",component:function(){return r.a.createElement(Z,null)}}));function Y(){return function(e){e({type:"LOADING_USER_DATA"}),fetch("https://my-recipe-box-project.herokuapp.com/profile",{method:"GET",headers:{token:f.getToken(),authorization:"Token ".concat(f.getToken())}}).then(function(e){return e.json()}).then(function(t){e({type:"LOAD_USER_DATA",payload:t})}).catch(function(e){return console.log(e)})}}var $=function(e){function t(){var e;return Object(m.a)(this,t),(e=Object(b.a)(this,Object(E.a)(t).call(this))).handleChange=function(t){var n=t.target.name,a=t.target.value;e.setState(Object(g.a)({},e.state,{user:Object(g.a)({},e.state.user,Object(p.a)({},n,a))}))},e.handleLoginSubmit=function(t,n){return t.preventDefault(),fetch("https://cors-anywhere.herokuapp.com/https://my-recipe-box-project.herokuapp.com/login",{method:"POST",body:JSON.stringify(n),headers:{"Content-Type":"application/json"}}).then(function(e){return e.json()}).then(function(t){f.authenticateToken(t.token),f.isUserAuthenticated()?(e.props.fetchUserData(),e.props.history.push("/")):e.setState(Object(g.a)({},e.state,{errors:!0}))}).catch(function(e){console.log(e)})},e.state={user:{username:"",password:""},errors:!1},e}return Object(O.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"login-form"},r.a.createElement("form",{onSubmit:function(t){return e.handleLoginSubmit(t,e.state.user)}},r.a.createElement("input",{type:"text",name:"username",placeholder:"username",value:this.state.user.username,onChange:this.handleChange}),r.a.createElement("input",{type:"password",name:"password",placeholder:"password",value:this.state.user.password,onChange:this.handleChange}),r.a.createElement("input",{type:"submit",value:"Login"})),this.state.errors?r.a.createElement("div",{className:"errors"},"There was a problem logging you in.  Please try again."):r.a.createElement(r.a.Fragment,null))}}]),t}(a.Component),ee=Object(j.a)(Object(s.b)(null,function(e){return{fetchUserData:Object(l.b)(Y,e)}})($)),te=function(e){function t(){var e;return Object(m.a)(this,t),(e=Object(b.a)(this,Object(E.a)(t).call(this))).handleChange=function(t){var n=t.target.name,a=t.target.value;e.setState(Object(g.a)({},e.state,{user:Object(g.a)({},e.state.user,Object(p.a)({},n,a))}))},e.handleSignUpSubmit=function(t){return t.preventDefault(),fetch("https://cors-anywhere.herokuapp.com/https://my-recipe-box-project.herokuapp.com/users",{method:"POST",body:JSON.stringify({user:e.state.user}),headers:{"Content-Type":"application/json"}}).then(function(e){return e.json()}).then(function(t){f.authenticateToken(t.token),f.isUserAuthenticated()?(e.props.fetchUserData(),e.props.history.push("/")):e.setState(Object(g.a)({},e.state,{errors:!0}))}).catch(function(e){return console.log(e)})},e.state={user:{username:"",password:"",email:""},errors:!1},e}return Object(O.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"signup-form"},r.a.createElement("form",{onSubmit:function(t){e.handleSignUpSubmit(t)}},r.a.createElement("input",{type:"text",name:"username",placeholder:"username",value:this.state.user.username,onChange:this.handleChange}),r.a.createElement("input",{type:"email",name:"email",placeholder:"email",value:this.state.user.email,onChange:this.handleChange}),r.a.createElement("input",{type:"password",name:"password",placeholder:"password",value:this.state.user.password,onChange:this.handleChange}),r.a.createElement("input",{type:"submit",value:"Register!"})),this.state.errors?r.a.createElement("div",{className:"errors"},"There was a problem creating your account.  Please ensure that all forms are filled."):r.a.createElement(r.a.Fragment,null))}}]),t}(a.Component),ne=Object(j.a)(Object(s.b)(null,function(e){return{fetchUserData:Object(l.b)(Y,e)}})(te)),ae=function(e){function t(){return Object(m.a)(this,t),Object(b.a)(this,Object(E.a)(t).apply(this,arguments))}return Object(O.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"welcome"},r.a.createElement("h1",null,"Recipe box is a nutritional tracker for home cooks who love to experiment in the kitchen"))}}]),t}(a.Component),re=function(e){function t(){var e;return Object(m.a)(this,t),(e=Object(b.a)(this,Object(E.a)(t).call(this))).handleLogout=function(t){t.preventDefault(),e.toggleLogin(),f.deauthenticateToken(),e.props.history.push("/")},e.toggleSignup=function(){e.setState({loginToggled:!1,signupToggled:!e.state.signupToggled})},e.toggleLogin=function(){e.setState({loginToggled:!e.state.loginToggled,signupToggled:!1})},e.renderForms=function(){return e.state.loginToggled?r.a.createElement(ee,null):e.state.signupToggled?r.a.createElement(ne,null):void 0},e.renderPrivateNavBar=function(){return r.a.createElement("div",{className:"nav-bar"},r.a.createElement(A.a,{to:"/"},"Home"),r.a.createElement(A.a,{to:"/my-recipes"},"My Recipes"),r.a.createElement(A.a,{to:"/recipes/new"},"Add a Recipe"),r.a.createElement("a",{href:"/logout",onClick:function(t){return e.handleLogout(t)}},"Logout"))},e.renderPublicNavBar=function(){return r.a.createElement("div",{className:"nav-bar"},r.a.createElement(A.a,{to:"/"},"Home"),r.a.createElement(A.a,{to:e.props.history,onClick:function(){return e.toggleSignup()}},"Sign Up"),r.a.createElement(A.a,{to:e.props.history,onClick:function(){return e.toggleLogin()}},"Log In"))},e.state={loginToggled:!1,signupToggled:!1,firstView:!0},e}return Object(O.a)(t,e),Object(h.a)(t,[{key:"componentDidUpdate",value:function(){this.state.firstView&&this.setState({firstView:!1})}},{key:"render",value:function(){return r.a.createElement("div",{className:"App"},r.a.createElement("div",{className:"navigation"},r.a.createElement("div",{id:"mainLogo"},r.a.createElement("h1",null,"Recipe Box")),f.isUserAuthenticated()?this.renderPrivateNavBar():this.renderPublicNavBar(),f.isUserAuthenticated()?r.a.createElement(r.a.Fragment,null):this.renderForms()),!f.isUserAuthenticated()&&this.state.firstView?r.a.createElement(ae,null):r.a.createElement(r.a.Fragment,null),r.a.createElement(r.a.Fragment,null,K))}}]),t}(a.Component),ie=Object(j.a)(re),oe=Object(l.d)(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{user:{id:null,username:"",email:"",recipes:[],auth:f.isUserAuthenticated(),isLoaded:!1},recipes:[],sumNutritionalDataFor:function(e,t){return Math.round(e.map(function(e){return e[t]}).reduce(function(e,t){return e+t},0))},formatRecipeURL:function(e){return e.toLowerCase().replace(/\s/g,"-")}},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOGOUT_USER":return{user:Object(g.a)({},e.user,{auth:f.isUserAuthenticated()})};case"LOADING_USER_DATA":return Object(g.a)({},e,{user:Object(g.a)({},e.user,{isLoaded:!0,auth:!0})});case"LOAD_USER_DATA":if(e.user.isLoaded)return Object(g.a)({},e,{user:Object(g.a)({},e.user,{id:t.payload.id,email:t.payload.email,username:t.payload.username,recipes:t.payload.recipes||[]})});console.log("Still Loading");break;case"LOAD_RECIPES":return Object(g.a)({},e,{recipes:t.payload});case"ADD_RECIPE":return Object(g.a)({},e,{recipes:Object(d.a)(e.recipes.concat(t.payload))});case"ADD_NEW_INGREDIENTS_TO_RECIPE":return Object(g.a)({},e,{recipes:e.recipes.map(function(e){return e.id===t.payload.recipeID?Object(g.a)({},e,{ingredients:e.ingredients.concat(t.payload.ingredientsList)}):e})});case"UPDATE_RECIPE_DETAILS":return Object(g.a)({},e,{recipes:e.recipes.map(function(e){return e.id===t.payload.id?Object(g.a)({},e,{title:t.payload.title,description:t.payload.description,image_url:t.payload.image_url,servings:t.payload.servings,id:t.payload.id}):e})});case"HANDLE_ONCHANGE_FOR_INGREDIENTS":return Object(g.a)({},e,{recipes:e.recipes.map(function(e){return e.id===t.payload.recipeID?Object(g.a)({},e,{ingredients:e.ingredients.map(function(e,n){return n===t.payload.ingredientIndex?Object(g.a)({},e,Object(p.a)({},t.payload.name,t.payload.value)):e})}):e})});case"HANDLE_ONCHANGE_FOR_RECIPE_DETAILS":return Object(g.a)({},e,{recipes:e.recipes.map(function(e){return e.id===t.payload.recipeID?Object(g.a)({},e,Object(p.a)({},t.payload.name,t.payload.value)):e})});case"UPDATE_INGREDIENT":return Object(g.a)({},e,{recipes:e.recipes.map(function(e){return e.id===t.payload.recipeID?Object(g.a)({},e,{ingredients:e.ingredients.map(function(e,n){return n===t.payload.ingredientIndex?t.payload.updatedIngredient:e})}):e})});case"DELETE_INGREDIENT":return Object(g.a)({},e,{recipes:e.recipes.map(function(e){return e.id===t.payload.recipeId?Object(g.a)({},e,{ingredients:e.ingredients.filter(function(e){return e!==t.payload.ingredient})}):e})});default:return e}},Object(l.c)(Object(l.a)(c.a),window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__()));o.a.render(r.a.createElement(s.a,{store:oe},r.a.createElement(u.a,null,r.a.createElement(ie,null))),document.getElementById("root"))}},[[30,1,2]]]);
//# sourceMappingURL=main.d94d9e35.chunk.js.map